apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Chart.Name }}-paperless-config
data:
  # Admin user configuration
  PAPERLESS_ADMIN_USER: {{ .Values.paperless.admin.username | quote }}
  PAPERLESS_ADMIN_MAIL: {{ .Values.paperless.admin.email | quote }}

  # Redis configuration (password will be injected via environment variable)
  PAPERLESS_REDIS: redis://{{ .Chart.Name }}-redis:6379

  # PostgreSQL configuration (password will be injected via environment variable)
  PAPERLESS_DBENGINE: postgresql
  PAPERLESS_DBHOST: {{ .Chart.Name }}-postgresql
  PAPERLESS_DBPORT: "5432"
  PAPERLESS_DBNAME: "paperless-ngx"

  # Gotenberg configuration      
  PAPERLESS_TIKA_ENABLED: 1
  PAPERLESS_TIKA_GOTENBERG_ENDPOINT: http://{{ .Chart.Name }}-gotenberg:3000
  PAPERLESS_TIKA_ENDPOINT: http://{{ .Chart.Name }}-tika:9998
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Chart.Name }}-postgresql-config
data:
  POSTGRES_DB: "paperless-ngx"
